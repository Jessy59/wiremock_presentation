<!doctype html>

<html lang="fr">
<head>
    <meta charset="utf-8">

    <title>Dynamique des sites</title>

    <meta name="description" content="A la découverte de la Wiremock">
    <meta name="author" content="Jessy Lavorel">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="libs/reveal.js/css/reveal.css">
    <link rel="stylesheet" href="libs/reveal.js/css/theme/sky.css" id="theme">
    <link rel="stylesheet" href="libs/reveal.js/lib/css/zenburn.css">

    <style>
            .reveal section img.imgNoDecorate {
                border:0;
                box-shadow: 0 0 0;
                background: initial;
            }



































    </style>

    <!-- Printing and PDF exports -->
    <script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'libs/reveal.js/css/print/pdf.css' : 'libs/reveal.js/css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );























    </script>

    <!--[if lt IE 9]>
    <script src="reveal-3.2.0/lib/js/html5shiv.js"></script>
    <![endif]-->
</head>
<body>
<div class="reveal">
    <div class="slides">

        <!-- *************************************************************** -->
        <!-- 0. Titre & plan -->
        <!-- *************************************************************** -->

        <section>
            <h1>Wiremock</h1>
            <h3>A la découverte de Wiremock</h3>
            <p></p>
            <p>
                <small>Créée par Jessy Lavorel via l'API de présentation <a href="https://github.com/hakimel/reveal.js">Reveal.js</a>
                </small>
            </p>

            <aside class="notes">
            </aside>
        </section>


        <!-- *************************************************************** -->
        <!-- 0. A l'aventure ! -->
        <!-- *************************************************************** -->

        <section>
            <section>
                <h3>Qui suis-je ?</h3>
                <h5 class="fragment">Jessy Lavorel</h5>
                <img src="images/section0/qui-sommes-nous.jpg" class="imgNoDecorate" width="400"/>

                <aside class="notes">
                </aside>
            </section>
        </section>

        <section>
            <section>
                <h3>Qu'est-ce que WIREMOCK ?</h3>

                <img src="images/wm.jpg" class="imgNoDecorate" width="400"/>

                <aside class="notes">
                </aside>
            </section>
            <section>
                WireMock est un outil qui permet de simuler le comportement d'une API HTTP
                <aside class="notes">
                    Demander si tout le monde voit ce qu'est qu'une api rest
                </aside>
            </section>
        </section>

        <!-- *************************************************************** -->
        <!-- 1. Quand utiliser WireMock ? -->
        <!-- *************************************************************** -->

        <section>
            <section>
                <h3>Quand utiliser WireMock?</h3>
                <br/>
                <br/>
                <ul>
                    <li class="fragment" style="font-size: 30px;margin-bottom: 20px;">Utilisation une API HTTP qui
                        n'est pas encore prête.
                    </li>
                    <li class="fragment" style="font-size: 30px;margin-bottom: 20px;">Ecriture de tests unitaires pour
                        les classes faisant appelles à des API HTTP
                    </li>
                    <li class="fragment" style="font-size: 30px;margin-bottom: 20px;">Ecriture de tests d'intégrations
                        d'API, ou de bout en bout.
                        <ul style="margin-top:30px;">
                            <ul>
                                <li class="fragment" style="font-size: 30px;margin-bottom: 20px;">Dépendances d'une API
                                    HTTP externe
                                </li>
                                <li class="fragment" style="font-size: 30px;margin-bottom: 20px;">Lenteurs des tests
                                </li>
                                <li class="fragment" style="font-size: 30px;margin-bottom: 20px;">Accès à l'api
                                    obligatoire lors du lancement des tests
                                </li>
                            </ul>
                        </ul>
                    </li>
                </ul>
            </section>
            <section>
                <small>
                    <img src="images/warning.png" class="imgNoDecorate" width="200"/>
                    <p>
                        Les tests utilisant WireMock ne peuvent pas garantir la compatibilité des applications avec les
                        API HTTP utilisées. Ces tests garantissent :
                    <ul>
                        <li class="fragment">Notre application envoie les requêtes attendues à l'API HTTP utilisée.</li>
                        <li class="fragment">Notre application fonctionne comme prévu lorsqu'elle reçoit une réponse
                            attendue de l'API
                            HTTP.
                        </li>
                    </ul>
                    </p>
                </small>
            </section>
        </section>

        <!-- *************************************************************** -->
        <!-- 2. Configuration ? -->
        <!-- *************************************************************** -->
        <section>
            <h3>Running Wiremock</h3>
            <section>
                <h5>Dépendances maven</h5>
                <pre>
                    <code class="Bash" data-trim>
                        <dependency>
                            <groupId>com.github.tomakehurst</groupId>
                            <artifactId>wiremock</artifactId>
                            <version>2.21</version>
                        </dependency>
                    </code>
                </pre>
            </section>
            <section>
                <h5>Démarrer le serveur</h5>
                <pre>
                    <code class="bash" data-trim>
                        // Instantiate the server
                        WireMockServer wireMockServer = new WireMockServer(String host, int port);

                        // Start the server
                        wireMockServer.start();

                        // Stop the server
                        wireMockServer.stop();
                    </code>
                </pre>
            </section>
        </section>

        <!-- *************************************************************** -->
        <!-- 4. Stub ? -->
        <!-- *************************************************************** -->
        <section>
            <section>
                <h3>Stubs</h3>
                <ul>
                    <li class="fragment">get() , post() , put() , delete(), ...</li>
                    <li class="fragment">path (/order)</li>
                    <li class="fragment">autres paramètres :
                        <ul>
                            <ul>
                                <li>status</li>
                                <li>body</li>
                                <li>delay</li>
                                <li>...</li>
                                </li>
                            </ul>
                        </ul>
                </ul>
            </section>
            <section>
                Je souhaite retourner la liste des commandes lorsque je contacte l'url http://localhost:8080/orders/
                <pre>
                    <code class="bash" data-trim>
                        WireMock.stubFor(WireMock.get("/orders/").willReturn(WireMock.aResponse().withStatus(200).withBody("[{\n" + "\t\t\"order_number\": 123,\n"
                        + "\t\t\"customer_order\": 456\n" + "\t}, {\n" + "\t\t\"order_number\": 789,\n"
                        + "\t\t\"customer_order\": 101112\n" + "\t}\n" + "]")));
                    </code>
                </pre>
                <img src="images/section3/get_orders.jpg" class="imgNoDecorate" width="500"/>
            </section>
            <section>
                Je souhaite retourner la liste des commandes lorsque je contacte l'url http://localhost:8080/orders/
                <pre>
                    <code class="bash" data-trim>
                        WireMock.stubFor(WireMock.get("/orders/").willReturn(WireMock.aResponse().withStatus(200).withBodyFile("orders.json")));
                    </code>
                </pre>
                <img src="images/section3/get_orders.jpg" class="imgNoDecorate" width="500"/>
            </section>
        </section>
    </div> <!-- End div slide -->

</div> <!-- End div Reveal -->

<!-- Scripts insertions -->
<script src="libs/reveal.js/lib/js/head.min.js"></script>
<script src="libs/reveal.js/js/reveal.js"></script>

<script>
			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
                width: 1015,
				controls: true, // affiche les flèches de contrôles
				progress: true, // affiche barre de progression
				history: true,
				center: true, // center verticalement
                slideNumber: true, // afficher les numéros de slide
				transition: 'slide', // none/fade/slide/convex/concave/zoom
				// Optional reveal.js plugins
				dependencies: [
					{ src: 'libs/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'libs/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'libs/reveal.js/plugin/zoom-js/zoom.js', async: true },
					{ src: 'libs/reveal.js/plugin/notes/notes.js', async: true }
				]
			});



































</script>
</body>
</html>
